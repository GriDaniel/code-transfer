trigger:
  paths:
    include:
      - samreglib/testData/*/*.xml

pool:
  name: 'Self-hosted'

steps:
- checkout: self
  fetchDepth: 0  # Fetches the full commit history

- powershell: |
    $added_files = git diff --name-only --diff-filter=A HEAD^ HEAD | Where-Object { $_ -match '^samreglib/testData/[^/]+/[^/]+\.xml$' }
    if ($added_files) {
      python samreglib/utils/processXML/processXML.py $added_files
    }
  displayName: 'Process Added XML Files'
